.app{display:flex;flex-direction:column;height:100vh}
header{display:flex;gap:.5rem;align-items:center;padding:10px;background:rgba(255,255,255,0.02)}
.toolbar{display:flex;gap:.5rem}
.main{flex:1;display:flex;min-height:0;}
.canvas-wrap{flex:1;position:relative;overflow:hidden}
#svg-lines{position:absolute;inset:0;pointer-events:none}
#stage{
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  justify-content: start;
  align-content: start;
  gap: 8px;
  padding: 10px;
}
.stage{position:absolute;inset:0;cursor:grab;border: 4px solid var(--accent-medium);overflow-x: hidden;overflow-y: visible;}
#zoom-container {width: 100%;height: 100%;position: relative;transform-origin: 0 0;}

.node{
  width:120px;
  height:180px;
  background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(255,255,255,0.02));
  border-radius:10px;
  border:1px solid rgba(255,255,255,0.04);
  padding:10px;
  color:#e6eef6;
  box-shadow:0 6px 18px rgba(2,6,23,0.6);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  transform-origin: top left;
}
.node .title{font-weight:600;margin-bottom:6px;white-space:nowrap;}
.node .body{font-size:.9rem;color:var(--muted)}
.node .handle{width:12px;height:12px;border-radius:50%;background:var(--accent-base);position:absolute;right:-6px;top:calc(50% - 10px);box-shadow:0 4px 10px var(--accent-light)}
.node .ygoimg{width:120px;height:180px;}
body, * {user-select: none;-webkit-user-select: none;-ms-user-select: none;}
.sidebar{width:260px;padding:8px;border-left:1px solid rgba(255,255,255,0.02);background:linear-gradient(90deg,rgba(255,255,255,0.01),transparent);display: flex;flex-direction: column;}
.search-pane {flex: 1;width: 100%;height:100%;border: none;}
#tabs-container {display: flex;gap: 8px;align-items: center;}
.tab {padding: 4px 10px;border-radius: 6px;background: rgba(255,255,255,0.05);cursor: pointer;min-width: 120px;text-align: center;user-select: text;}
.tab.active {background: var(--accent-light);font-weight: 600;}
.newtab {margin-left: auto;}